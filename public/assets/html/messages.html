<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Neural Link | Elementa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); }
        .custom-scroll::-webkit-scrollbar { width: 5px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #f1c40f; border-radius: 10px; }
    </style>
</head>
<body class="bg-[#0f172a] text-slate-100 h-screen flex flex-col overflow-hidden">
    <header class="p-4 border-b border-white/10 flex justify-between items-center glass">
        <div class="flex items-center gap-3">
            <a href="../index.html" class="text-slate-400 hover:text-[#f1c40f]">‚Üê Back</a>
            <h1 class="font-black tracking-tighter text-[#f1c40f]">NEURAL LINK</h1>
        </div>
        <div id="status" class="text-[10px] text-green-500 animate-pulse font-bold uppercase">Active Node</div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <main class="flex-1 flex flex-col">
            <div id="chat-log" class="flex-1 p-6 overflow-y-auto custom-scroll space-y-4">
                </div>
            
            <footer class="p-4 glass border-t border-white/10">
                <div class="max-w-4xl mx-auto flex gap-3">
                    <input id="chat-input" type="text" placeholder="Type a message to the grid..." 
                           class="flex-1 bg-white/5 border border-white/10 rounded-2xl px-6 py-3 outline-none focus:border-[#f1c40f] transition-all">
                    <button onclick="send()" class="bg-[#f1c40f] text-black px-8 py-3 rounded-2xl font-black hover:scale-105 active:scale-95 transition-all">SEND</button>
                </div>
            </footer>
        </main>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Logic to handle real-time sync across files
        const db = getFirestore();
        const auth = getAuth();
        
        window.send = async () => {
            const input = document.getElementById('chat-input');
            if(!input.value) return;
            await addDoc(collection(db, "messages"), {
                text: input.value,
                user: auth.currentUser?.email || "Anonymous Node",
                createdAt: serverTimestamp()
            });
            input.value = '';
        };

        onSnapshot(query(collection(db, "messages"), orderBy("createdAt", "asc")), (snap) => {
            const log = document.getElementById('chat-log');
            log.innerHTML = '';
            snap.forEach(doc => {
                const d = doc.data();
                log.innerHTML += `<div class="bg-white/5 p-4 rounded-2xl border border-white/5 max-w-lg">
                    <p class="text-[10px] text-[#f1c40f] mb-1 font-bold">${d.user}</p>
                    <p class="text-sm leading-relaxed">${d.text}</p>
                </div>`;
            });
            log.scrollTop = log.scrollHeight;
        });
    </script>
</body>
  </html>
  
